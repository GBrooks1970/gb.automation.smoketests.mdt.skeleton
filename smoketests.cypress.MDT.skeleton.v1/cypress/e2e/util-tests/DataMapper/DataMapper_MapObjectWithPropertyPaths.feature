@UTILTEST @DATAMAPPER
Feature: DataMapper - Map Object With Dot Separated Property Paths
  As a developer
  I want to map an object so that each leaf value is replaced with its full property path
  In order to verify that the object's structure is maintained and each leaf is tagged with its location

  Scenario Outline: DATAMAPPER-MAP-OBJECTS-PROPERTYPATHS-001 - DataMapper method Map object with property paths
    Given a specific nested JSON object:
      """
      <inputObject>
      """
    When I map the object with property paths
    Then the resulting object should equal:
      """
      <expectedObject>
      """

    Examples:
      | inputObject                                                                                                                                                                                                                 | expectedObject                                                                                                                                                                                                                                                                                           |
      | {"a": {"b": 1, "c": 2}, "d": 3}                                                                                                                                                                                             | {"a": {"b": "a.b", "c": "a.c"}, "d": "d"}                                                                                                                                                                                                                                                                |
      | {"a": [{"b": 1}, {"c": 2}]}                                                                                                                                                                                                 | {"a": [ {"b": "a.1.b"}, {"c": "a.2.c"} ]}                                                                                                                                                                                                                                                                |
      | {"x": {"y": {"z": 5}}, "w": [1, {"v": 2}]}                                                                                                                                                                                  | {"x": {"y": {"z": "x.y.z"}}, "w": ["w.1", {"v": "w.2.v"}]}                                                                                                                                                                                                                                               |
      | {"Profile":{"Forenames":"Alice","Initials":"A","Surname":"Smith","Email":"alice.smith@example.com","Gender":"Female","DateOfBirth":"1985-05-15","HomeNumber":"1122334455","MobileNumber":"9988776655"},"PostCode":"XY99ZZ"} | {"Profile": {"Forenames": "Profile.Forenames","Initials": "Profile.Initials","Surname": "Profile.Surname","Email": "Profile.Email", "Gender": "Profile.Gender", "DateOfBirth": "Profile.DateOfBirth", "HomeNumber": "Profile.HomeNumber","MobileNumber": "Profile.MobileNumber"},"PostCode": "PostCode"} |


  Scenario Outline: DATAMAPPER-MAP-OBJECTS-PROPERTYPATHS-002 - DataMapper method Map object with property paths from various predefined objects
    Given I have the predefined nested object "<objectName>"
    When I call the mapObjectWithPropertyPaths method
    Then the resulting object should equal:
      """
      <expectedObject>
      """

    Examples:
      | objectName                    | expectedObject                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
      | TestData_TopazApplicant       | {"PID":"PID","Scheme":"Scheme","Profile":{"Forenames":"Profile.Forenames","Initials":"Profile.Initials","Surname":"Profile.Surname","Email":"Profile.Email","Gender":"Profile.Gender","DateOfBirth":"Profile.DateOfBirth","HomeNumber":"Profile.HomeNumber","MobileNumber":"Profile.MobileNumber"},"PostCode":"PostCode","FeePaidStatus":"FeePaidStatus","FeeType":"FeeType","FeePaid":"FeePaid","TotalFee":"TotalFee","PaymentAmount":"PaymentAmount","RefundAmount":"RefundAmount","QualificationsReceived":[],"QualificationsAwaiting":[],"PersonalStatement":"PersonalStatement","ReferenceDetails":{"RefereeName":"ReferenceDetails.RefereeName","Post":"ReferenceDetails.Post","Organisation":"ReferenceDetails.Organisation","Address":{"AddressLines":["ReferenceDetails.Address.AddressLines.1","ReferenceDetails.Address.AddressLines.2","ReferenceDetails.Address.AddressLines.3","ReferenceDetails.Address.AddressLines.4"],"PostCode":"ReferenceDetails.Address.PostCode"},"Telephone":"ReferenceDetails.Telephone","Fax":"ReferenceDetails.Fax","Email":"ReferenceDetails.Email","ReferenceText":"ReferenceDetails.ReferenceText"},"ApplicantOtherDetails":{"OtherPersonalDetails":{"HomeAddress":{"AddressLines":["ApplicantOtherDetails.OtherPersonalDetails.HomeAddress.AddressLines.1","ApplicantOtherDetails.OtherPersonalDetails.HomeAddress.AddressLines.2","ApplicantOtherDetails.OtherPersonalDetails.HomeAddress.AddressLines.3"],"PostCode":"ApplicantOtherDetails.OtherPersonalDetails.HomeAddress.PostCode","Country":"ApplicantOtherDetails.OtherPersonalDetails.HomeAddress.Country"},"SecondEmail":"ApplicantOtherDetails.OtherPersonalDetails.SecondEmail","ParentalOccupation":"ApplicantOtherDetails.OtherPersonalDetails.ParentalOccupation","PrefferredFirstName":"ApplicantOtherDetails.OtherPersonalDetails.PrefferredFirstName","PreviousSurname":"ApplicantOtherDetails.OtherPersonalDetails.PreviousSurname","ResidentialStatus":"ApplicantOtherDetails.OtherPersonalDetails.ResidentialStatus","AreaOfPermanentResidence":"ApplicantOtherDetails.OtherPersonalDetails.AreaOfPermanentResidence","CountryOfBirth":"ApplicantOtherDetails.OtherPersonalDetails.CountryOfBirth","Nationality":"ApplicantOtherDetails.OtherPersonalDetails.Nationality","DualNationality":"ApplicantOtherDetails.OtherPersonalDetails.DualNationality","LivedOrWorkedEU":"ApplicantOtherDetails.OtherPersonalDetails.LivedOrWorkedEU","ParentEUNational":"ApplicantOtherDetails.OtherPersonalDetails.ParentEUNational","DateOfUKEntry":"ApplicantOtherDetails.OtherPersonalDetails.DateOfUKEntry","OutputLanguage":"ApplicantOtherDetails.OtherPersonalDetails.OutputLanguage","LargeFontRequired":"ApplicantOtherDetails.OtherPersonalDetails.LargeFontRequired","NationalId1":"ApplicantOtherDetails.OtherPersonalDetails.NationalId1","NationalId2":"ApplicantOtherDetails.OtherPersonalDetails.NationalId2"},"OtherMisc01Details":{"ScottishCandidateNumber":"ApplicantOtherDetails.OtherMisc01Details.ScottishCandidateNumber","BTECRegistration":"ApplicantOtherDetails.OtherMisc01Details.BTECRegistration","StudentSupportArranagements":"ApplicantOtherDetails.OtherMisc01Details.StudentSupportArranagements","LA":"ApplicantOtherDetails.OtherMisc01Details.LA","FeeCode":"ApplicantOtherDetails.OtherMisc01Details.FeeCode","BeenInCare":"ApplicantOtherDetails.OtherMisc01Details.BeenInCare","TimeInCare":"ApplicantOtherDetails.OtherMisc01Details.TimeInCare","IdentifiesAsTransgender":"ApplicantOtherDetails.OtherMisc01Details.IdentifiesAsTransgender","IELTS":"ApplicantOtherDetails.OtherMisc01Details.IELTS","TOEFL":"ApplicantOtherDetails.OtherMisc01Details.TOEFL","DIDS4Digit":"ApplicantOtherDetails.OtherMisc01Details.DIDS4Digit","DIDS16Digit":"ApplicantOtherDetails.OtherMisc01Details.DIDS16Digit","Disability":"ApplicantOtherDetails.OtherMisc01Details.Disability","SpecialNeeds":"ApplicantOtherDetails.OtherMisc01Details.SpecialNeeds","Dependants":"ApplicantOtherDetails.OtherMisc01Details.Dependants","EthnicOrigin":"ApplicantOtherDetails.OtherMisc01Details.EthnicOrigin","Religion":"ApplicantOtherDetails.OtherMisc01Details.Religion","SexualOrientation":"ApplicantOtherDetails.OtherMisc01Details.SexualOrientation","CriminalConviction":"ApplicantOtherDetails.OtherMisc01Details.CriminalConviction","DBSCheck":"ApplicantOtherDetails.OtherMisc01Details.DBSCheck","ISANumber":"ApplicantOtherDetails.OtherMisc01Details.ISANumber","ParentalHE":"ApplicantOtherDetails.OtherMisc01Details.ParentalHE","UnavailableInterviewDates":"ApplicantOtherDetails.OtherMisc01Details.UnavailableInterviewDates"},"PassportDetails":{"StudentVisaRequired":"ApplicantOtherDetails.PassportDetails.StudentVisaRequired","PassportNumber":"ApplicantOtherDetails.PassportDetails.PassportNumber","PassportPlaceOfIssue":"ApplicantOtherDetails.PassportDetails.PassportPlaceOfIssue","PreviouslyStudiedInUkOnStudentVisa":"ApplicantOtherDetails.PassportDetails.PreviouslyStudiedInUkOnStudentVisa","PassportIssueDate":"ApplicantOtherDetails.PassportDetails.PassportIssueDate","PassportExpiryDate":"ApplicantOtherDetails.PassportDetails.PassportExpiryDate","SettledInUK":"ApplicantOtherDetails.PassportDetails.SettledInUK"},"OtherMisc02Details":{"NationalInsuranceNumber":"ApplicantOtherDetails.OtherMisc02Details.NationalInsuranceNumber","PrefferredRegion":"ApplicantOtherDetails.OtherMisc02Details.PrefferredRegion","DeptHealthRegistration":"ApplicantOtherDetails.OtherMisc02Details.DeptHealthRegistration","SchoolCode":"ApplicantOtherDetails.OtherMisc02Details.SchoolCode","ProgressFile":"ApplicantOtherDetails.OtherMisc02Details.ProgressFile","SLCStudentFinanceApplying":"ApplicantOtherDetails.OtherMisc02Details.SLCStudentFinanceApplying","SAASStudentFinanceApplying":"ApplicantOtherDetails.OtherMisc02Details.SAASStudentFinanceApplying","EarliestStart":"ApplicantOtherDetails.OtherMisc02Details.EarliestStart","SecondmentPlace":"ApplicantOtherDetails.OtherMisc02Details.SecondmentPlace","IndefiniteUKLeave":"ApplicantOtherDetails.OtherMisc02Details.IndefiniteUKLeave","LastEstablishment":"ApplicantOtherDetails.OtherMisc02Details.LastEstablishment","SLCStudentFinanceShareDetails":"ApplicantOtherDetails.OtherMisc02Details.SLCStudentFinanceShareDetails","SAASStudentFinanceShareDetails":"ApplicantOtherDetails.OtherMisc02Details.SAASStudentFinanceShareDetails","NearestEdInstitution":"ApplicantOtherDetails.OtherMisc02Details.NearestEdInstitution","EligibleForNHSBursary":"ApplicantOtherDetails.OtherMisc02Details.EligibleForNHSBursary","SelfFunding":"ApplicantOtherDetails.OtherMisc02Details.SelfFunding","TTANumber":"ApplicantOtherDetails.OtherMisc02Details.TTANumber","TTAMatchingAllowed":"ApplicantOtherDetails.OtherMisc02Details.TTAMatchingAllowed","StudentFinanceReminder":"ApplicantOtherDetails.OtherMisc02Details.StudentFinanceReminder"},"OtherEducationDetails":{"SchoolCollegeAndUniversityEducation":{"EducationSchoolCollegeUniversity":[],"JnrDepartmentAcademy":"ApplicantOtherDetails.OtherEducationDetails.SchoolCollegeAndUniversityEducation.JnrDepartmentAcademy"},"AdditionalEducation":{"NAGTY":"ApplicantOtherDetails.OtherEducationDetails.AdditionalEducation.NAGTY","HIQE":"ApplicantOtherDetails.OtherEducationDetails.AdditionalEducation.HIQE","HighestExpectedQualification":"ApplicantOtherDetails.OtherEducationDetails.AdditionalEducation.HighestExpectedQualification","ULN":"ApplicantOtherDetails.OtherEducationDetails.AdditionalEducation.ULN","HIQA":"ApplicantOtherDetails.OtherEducationDetails.AdditionalEducation.HIQA"},"ActivitiesInPreparationForHigherEducation":[],"FirstDegreeOrEquivalent":{"NameOfInstitution":"ApplicantOtherDetails.OtherEducationDetails.FirstDegreeOrEquivalent.NameOfInstitution","Title":"ApplicantOtherDetails.OtherEducationDetails.FirstDegreeOrEquivalent.Title","Class":"ApplicantOtherDetails.OtherEducationDetails.FirstDegreeOrEquivalent.Class","TitleOfCourse":"ApplicantOtherDetails.OtherEducationDetails.FirstDegreeOrEquivalent.TitleOfCourse","EntryMonth":"ApplicantOtherDetails.OtherEducationDetails.FirstDegreeOrEquivalent.EntryMonth","EntryYear":"ApplicantOtherDetails.OtherEducationDetails.FirstDegreeOrEquivalent.EntryYear","CompletionMonth":"ApplicantOtherDetails.OtherEducationDetails.FirstDegreeOrEquivalent.CompletionMonth","CompletionYear":"ApplicantOtherDetails.OtherEducationDetails.FirstDegreeOrEquivalent.CompletionYear"},"ContentOfFirstDegreeOrEquivalent":[],"OtherRelevantQualifications":[],"AdditionalUCASTeacherTrainingInformation":{"ProfessionalSkillsTestRegistration":"ApplicantOtherDetails.OtherEducationDetails.AdditionalUCASTeacherTrainingInformation.ProfessionalSkillsTestRegistration","DateOfNumeracyTest":"ApplicantOtherDetails.OtherEducationDetails.AdditionalUCASTeacherTrainingInformation.DateOfNumeracyTest","UTTHighestExpectedQualification":"ApplicantOtherDetails.OtherEducationDetails.AdditionalUCASTeacherTrainingInformation.UTTHighestExpectedQualification","ProfessionalSkillsTestRegistrationNumber":"ApplicantOtherDetails.OtherEducationDetails.AdditionalUCASTeacherTrainingInformation.ProfessionalSkillsTestRegistrationNumber","DateOfLiteracyTest":"ApplicantOtherDetails.OtherEducationDetails.AdditionalUCASTeacherTrainingInformation.DateOfLiteracyTest"}},"CatchQuestions":{"NationalInsuranceNumber":"ApplicantOtherDetails.CatchQuestions.NationalInsuranceNumber","CATCHQuestionsAsked":"ApplicantOtherDetails.CatchQuestions.CATCHQuestionsAsked","NMCPIN":"ApplicantOtherDetails.CatchQuestions.NMCPIN"},"DetailsOfPaidEmployment":[],"Languages":[],"EmergencyContact":{"ContactName":"ApplicantOtherDetails.EmergencyContact.ContactName","PhoneNumber":"ApplicantOtherDetails.EmergencyContact.PhoneNumber"},"PreviousNursingMidwiferyEducation":[]},"MoreAboutYouAndExtraActivities":{"MoreAboutYouDetails":{"Disability":"MoreAboutYouAndExtraActivities.MoreAboutYouDetails.Disability","DisabilityFurtherDetails":"MoreAboutYouAndExtraActivities.MoreAboutYouDetails.DisabilityFurtherDetails","OfficialRefugeeStatus":"MoreAboutYouAndExtraActivities.MoreAboutYouDetails.OfficialRefugeeStatus","FreeSchoolMeals":"MoreAboutYouAndExtraActivities.MoreAboutYouDetails.FreeSchoolMeals","EstrangedFromParents":"MoreAboutYouAndExtraActivities.MoreAboutYouDetails.EstrangedFromParents","ParentingResponsibilities":"MoreAboutYouAndExtraActivities.MoreAboutYouDetails.ParentingResponsibilities","CaringResponsibilities":"MoreAboutYouAndExtraActivities.MoreAboutYouDetails.CaringResponsibilities","ParentInArmedForces":"MoreAboutYouAndExtraActivities.MoreAboutYouDetails.ParentInArmedForces","UKArmedForces":"MoreAboutYouAndExtraActivities.MoreAboutYouDetails.UKArmedForces"},"ExtraActivityDetails":[]},"DataUpdates":{"ReferenceDetails":{"RefereeName":"DataUpdates.ReferenceDetails.RefereeName","Post":"DataUpdates.ReferenceDetails.Post","Telephone":"DataUpdates.ReferenceDetails.Telephone","Fax":"DataUpdates.ReferenceDetails.Fax","Email":"DataUpdates.ReferenceDetails.Email","Organisation":"DataUpdates.ReferenceDetails.Organisation","Address":{"PostCode":"DataUpdates.ReferenceDetails.Address.PostCode","AddressLines":[]},"ReferenceText":"DataUpdates.ReferenceDetails.ReferenceText"}}} |
      | TestData_UkAddress            | {"AddressLines":["AddressLines.1","AddressLines.2","AddressLines.3","AddressLines.4"],"PostCode":"PostCode"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
      | TestData_sampleObjectArray    | [{"Title":"1.Title","MainSubject":"1.MainSubject","AwardingBody":"1.AwardingBody","Month":"1.Month","Year":"1.Year"},{"Title":"2.Title","MainSubject":"2.MainSubject","AwardingBody":"2.AwardingBody","Month":"2.Month","Year":"2.Year"}]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      | TestData_UkAddressWithCountry | {"AddressLines":["AddressLines.1","AddressLines.2","AddressLines.3"],"PostCode":"PostCode","Country":"Country"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |